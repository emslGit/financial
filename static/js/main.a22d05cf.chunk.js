(this["webpackJsonpfinancial-planner"]=this["webpackJsonpfinancial-planner"]||[]).push([[0],{163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(45),s=n.n(c),l=(n(52),n(47)),i=n(4),u=n(46),o=(n(60),n(61),n(0)),d=Object(r.forwardRef)((function(e,t){var n=e.text,r=e.unit,a=e.onChange,c=e.options;return Object(o.jsxs)("span",{className:"InputComponent",children:[Object(o.jsx)("p",{children:n}),Object(o.jsx)("input",{ref:t,onChange:a,type:(null===c||void 0===c?void 0:c.type)||"number",maxLength:(null===c||void 0===c?void 0:c.maxLength)||"",defaultValue:(null===c||void 0===c?void 0:c.defaultValue)||""}),r&&Object(o.jsx)("p",{children:r})]})})),j=(n(63),function(e){var t=e.text,n=e.stat;return Object(o.jsxs)("span",{className:"StatsComponent",children:[Object(o.jsx)("p",{children:Object(o.jsx)("b",{children:t})}),Object(o.jsx)("p",{children:n[0].toLocaleString().replaceAll(","," ")+" "+n[1]})]})}),b=n(27),x=(n(163),function(e){var t=e.type,n=e.title,r=e.data,a=e.xLabel,c=e.yLabel,s={title:{display:!0,text:n,fontSize:20},scales:{xAxes:[{scaleLabel:{display:a,labelString:a}}],yAxes:[{scaleLabel:{display:c,labelString:c}}]},legend:{display:e.legend,position:"bottom"}};return Object(o.jsxs)("div",{className:"ChartWrapperComponent",children:["bar"===t&&Object(o.jsx)(b.Bar,{data:r,options:s}),"line"===t&&Object(o.jsx)(b.Line,{data:r,options:s})]})}),p=(n(164),function(e){var t=e.addExtra,n=e.currency,a=(new Date).getFullYear(),c=Object(r.useRef)(null),s=Object(r.useRef)(null),l=Object(r.useRef)(null),i=Object(r.useRef)(null),u=Object(r.useRef)(null),d=Object(r.useRef)(null);return Object(o.jsxs)("div",{className:"AddExtrasComponent flex-cols",children:[Object(o.jsxs)("span",{children:[Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"Name of event: "}),Object(o.jsx)("input",{ref:c,type:"text"})]}),Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"Starting anno: "}),Object(o.jsx)("input",{ref:s,type:"number"})]}),Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"Ending anno: "}),Object(o.jsx)("input",{ref:l,type:"number"})]})]}),Object(o.jsxs)("span",{children:[Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"Initial impact: "}),Object(o.jsxs)("span",{children:[Object(o.jsx)("input",{ref:i,type:"number"}),Object(o.jsx)("p",{children:n})]})]}),Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"Final impact: "}),Object(o.jsxs)("span",{children:[Object(o.jsx)("input",{ref:u,type:"number"}),Object(o.jsx)("p",{children:n})]})]}),Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"Annual impact: "}),Object(o.jsxs)("span",{children:[Object(o.jsx)("input",{ref:d,type:"number"}),Object(o.jsx)("p",{children:n})]})]})]}),Object(o.jsx)("button",{onClick:function(){return t(function(){var e,t,n,r=null===(e=c.current)||void 0===e?void 0:e.value,o=parseInt(null===(t=s.current)||void 0===t?void 0:t.value),j=parseInt((null===(n=l.current)||void 0===n?void 0:n.value)||o);if(r)if(o<a)s.current.focus();else{if(!(j<o)){for(var b,x,p,h,f=[],O=o;O<=j;O++)f.push(O);var v={id:Math.floor(1e4*Math.random()),name:null===(b=c.current)||void 0===b?void 0:b.value,period:f,first:parseFloat(null===(x=i.current)||void 0===x?void 0:x.value)||0,last:parseFloat(null===(p=u.current)||void 0===p?void 0:p.value)||0,annual:parseFloat(null===(h=d.current)||void 0===h?void 0:h.value)||0};return c.current.value="",s.current.value="",l.current.value="",i.current.value="",u.current.value="",d.current.value="",v}l.current.focus()}else c.current.focus()}())},children:"Add Event"})]})}),h=(n(165),function(e){var t=e.extra,n=e.currency,r=e.removeExtra;return Object(o.jsxs)("div",{className:"ExtraComponent flex-between",children:[Object(o.jsxs)("span",{className:"flex-cols",children:[Object(o.jsx)("b",{children:t.name}),Object(o.jsxs)("p",{children:[(t.first>0?" Providing ":"Costing ")+t.first.toLocaleString().replaceAll(","," ")+" "+n," at year ",t.period[0]," and",(t.annual>0?" providing ":" costing ")+t.annual.toLocaleString().replaceAll(","," ")+" "+n," every year until ",t.period[t.period.length-1]," where"," "+t.last.toLocaleString().replaceAll(","," ")+" "+n," will be ",t.last>0?" reimbursed.":"deducted."]})]}),Object(o.jsx)("span",{className:"flex-center",children:Object(o.jsxs)("button",{className:"x-button",onClick:function(){return r(t.id)},children:[Object(o.jsx)("div",{}),Object(o.jsx)("div",{})]})})]})}),f=(n(166),Object(r.forwardRef)((function(e,t){var n=Object(r.useRef)(null),a=Object(r.useRef)(null),c=Object(r.useRef)(null),s=Object(r.useState)("se"),l=Object(i.a)(s,2),u=l[0],d=l[1];return Object(r.useImperativeHandle)(t,(function(){return{get input(){return c.current},get radio(){return n.current}}})),Object(o.jsxs)("span",{className:"TaxComponent",children:[Object(o.jsx)("p",{children:"Income tax:"}),Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"SE"}),Object(o.jsx)("input",{ref:a,onChange:function(){return d("se")},type:"radio",id:"se",name:"se",value:"se",checked:"se"===u})]}),Object(o.jsxs)("span",{children:[Object(o.jsx)("p",{children:"Fix"}),Object(o.jsx)("input",{ref:n,onChange:function(){return d("fix")},type:"radio",id:"fix",name:"fix",value:"fix",checked:"fix"===u}),Object(o.jsx)("input",{ref:c,type:"percent",defaultValue:"0",disabled:"se"===u}),Object(o.jsx)("p",{children:"%"})]})]})}))),O=(n(167),Object(r.createContext)(null)),v=function(){var e=Object(r.useContext)(O),t=(e.settings,e.setSettings),n=Object(r.useRef)(null),a=Object(r.useRef)(null),c=Object(r.useRef)(null);Object(r.useEffect)((function(){s()}),[]);var s=function(){var e,r,s;t({iterations:null===(e=n.current)||void 0===e?void 0:e.value,precision:null===(r=a.current)||void 0===r?void 0:r.value,currency:null===(s=c.current)||void 0===s?void 0:s.value})};return Object(o.jsxs)("span",{className:"SettingsComponent",children:[Object(o.jsx)(d,{text:"Iterations:",onChange:s,ref:n,options:{type:"text",maxLength:6,defaultValue:1e3}}),Object(o.jsx)(d,{text:"Precision:",onChange:s,ref:a,options:{type:"text",maxLength:3,defaultValue:2}}),Object(o.jsxs)("span",{className:"flex-center",children:[Object(o.jsx)("p",{children:"Currency:"}),Object(o.jsxs)("select",{ref:c,onChange:s,children:[Object(o.jsx)("option",{value:"SEK",children:"SEK"}),Object(o.jsx)("option",{value:"USD",children:"USD"}),Object(o.jsx)("option",{value:"EUR",children:"EUR"})]})]})]})},m=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),a=Object(r.useState)({}),c=Object(i.a)(a,2),s=c[0],b=c[1],m=Object(r.useState)({}),g=Object(i.a)(m,2),y=g[0],M=g[1],C=Object(r.useState)({}),R=Object(i.a)(C,2),S=R[0],F=R[1],L=Object(r.useState)({currency:"SEK"}),N=Object(i.a)(L,2),w=N[0],A=N[1],E=Object(r.useState)([]),k=Object(i.a)(E,2),V=k[0],I=k[1],D=Object(r.useState)({worst:"",best:"",mean:"",median:"",sigma:"",s1:"",s2:""}),P=Object(i.a)(D,2),W=P[0],Y=P[1],T=Object(r.useRef)(null),U=Object(r.useRef)(null),z=Object(r.useRef)(null),B=Object(r.useRef)(null),K=Object(r.useRef)(null),J=Object(r.useRef)(null),q=Object(r.useRef)(null),H=Object(r.useRef)(null),G=Object(r.useRef)(null),Q=Object(r.useRef)(null),X=Object(r.useRef)(null),Z=Object(r.useRef)(null),$=Object(r.useRef)(null);String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var _=function(e){var t;return(null===(t=K.current)||void 0===t?void 0:t.radio.checked)?Math.max(parseFloat(K.current.input.value)/100,0)||0:ee(e)},ee=function(e){return e<=1e4?.15:8e4<=e&&e<1e5?.4:1e5<=e?.45:(30.7+14.3*Math.sin(256e-7*e-1.3))/100},te=function(e){I(V.filter((function(t){return t.id!==e})))},ne=function(e){var r,a,c,s,l,i,o,d,j,x,p,h=Math.max(11-n,0),f=parseFloat(null===(r=z.current)||void 0===r?void 0:r.value)||0,O=parseFloat(null===(a=Z.current)||void 0===a?void 0:a.value)||0,v=parseFloat(null===(c=$.current)||void 0===c?void 0:c.value)||0,m=parseFloat(null===(s=Q.current)||void 0===s?void 0:s.value)||0,g=parseFloat(null===(l=X.current)||void 0===l?void 0:l.value)||0,y=1+parseFloat(null===(i=q.current)||void 0===i?void 0:i.value)/100||1,C=1+parseFloat(null===(o=G.current)||void 0===o?void 0:o.value)/100||1,R=Math.max((null===(d=U.current)||void 0===d?void 0:d.value)-(null===(j=T.current)||void 0===j?void 0:j.value),0),S=function(e){var n,r=Array(Math.max(parseInt(null===(n=B.current)||void 0===n?void 0:n.value),0)).fill(0);return e.map((function(e){e.period.map((function(n,a){var c=e.annual,s=Math.max(n-t,0);0===a?c+=e.first:a===e.period.length-1&&(c+=e.last),r[s]+=c}))})),r}(V),L=Math.min(1/w.precision,1),N=Math.max(parseFloat(null===(x=J.current)||void 0===x?void 0:x.value),0)||0,A=Math.max(parseFloat(null===(p=H.current)||void 0===p?void 0:p.value),0)||0,E=Math.round(Math.max((N*(1-_(N))-A)*h,0)),k=[],I=[],D=[(f+E+(S[0]<0?-S[0]:0))*e],P={sigmas:[],outcomes:[]},W=1;do{for(var K=Math.max(N,0)||0,ee=Math.max(A,0)||0,te=new Object({years:[t],worth:[f+E-S[0]],invested:[E],fees:[Math.max(12*Math.round(K-ee)*(O+v)/100,0)],expenses:[Math.max(ee*h+(S[0]<0?-S[0]:0),0)]}),ne=0;++ne<parseFloat(null===(re=B.current)||void 0===re?void 0:re.value);){var re,ae=te.years.length,ce=R&&R<ne?12*-ee:12*(K*(1-_(K))-ee),se=ce+te.worth[ae-1]+S[ne],le=Math.round(se*(1+(u.normal.mean(m,g,3)-(O+v))/100));te.years.push(t+ne),te.invested.push(R&&R<ne?te.invested[ae-1]:Math.round(Math.max(ce+te.invested[ae-1],0))),te.worth.push(le),te.fees.push(Math.round(Math.max(se*(O+v)/100,0))),te.expenses.push(Math.round(Math.max(12*ee+(S[ne]<ne?-S[ne]:ne),0))),D[ne]=(D[ne]||0)+le,K=Math.max(K*y,0),ee=Math.max(ee*C,0)}I.push(te.worth[ne-1]),k.push(te)}while(W++<e);I.sort((function(e,t){return e-t})),D=D.map((function(e){return Math.round(e/k.length)}));var ie=function(e){var t=Math.round(e.reduce((function(e,t){return e+t}))/e.length),n=e[Math.floor(e.length/2)],r=Math.round(Math.sqrt(e.reduce((function(e,n){return e+Math.pow(n-t,2)}),0)/(e.length-1)));return{mean:t,median:n,sigma:r}}(I),ue=ie.mean,oe=ie.median,de=ie.sigma,je={x:[],no:[]};I.forEach((function(e){var t=ue-e,n=t>0?Math.ceil(t/(de*L)):Math.floor(t/(de*L)),r=t>0?Math.ceil(t/de):Math.floor(t/de);je.x[n]=(je.x[n]||1)+1,je.no[r]=(je.no[r]||1)+1})),Object.keys(je.x).sort((function(e,t){return e-t})).forEach((function(e){P.sigmas.push(e),P.outcomes.push(je.x[e])})),Y({best:[I[I.length-1],w.currency],worst:[I[0],w.currency],mean:[ue,w.currency],median:[oe,w.currency],sigma:[de,w.currency],s1:[(100*((je.no[-1]||0)+(je.no[1]||0))/k.length).toPrecision(4),"%"],s2:[(100*((je.no[-1]||0)+(je.no[1]||0)+(je.no[-2]||0)+(je.no[2]||0))/k.length).toPrecision(4),"%"]}),b({labels:k[0].years,datasets:[{label:"Total",backgroundColor:"darkslateblue",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:D},{label:"Invested",backgroundColor:"rgba(0,192,0,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:k[0].invested}]}),F({labels:k[0].years,datasets:[{label:"Fees & Inflation",backgroundColor:"rgba(255,100,0,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:k[0].fees},{label:"Expenses",backgroundColor:"rgba(192,0,0,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:k[0].expenses}]}),M({labels:P.sigmas,datasets:[{backgroundColor:"darkslateblue",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:P.outcomes,pointRadius:0}]})};return Object(o.jsx)(O.Provider,{value:{settings:w,setSettings:A},children:Object(o.jsxs)("div",{className:"App flex-center",children:[Object(o.jsx)("header",{className:"flex-center",children:Object(o.jsx)("h1",{children:"Financial Simulator"})}),Object(o.jsxs)("div",{className:"wrapper flex-rows",children:[Object(o.jsxs)("div",{className:"finance-inputs",children:[Object(o.jsx)("br",{}),Object(o.jsx)(d,{text:"Your age:",unit:"Yrs",ref:T,options:{type:"text",maxLength:2,defaultValue:25}}),Object(o.jsx)(d,{text:"Retirement age:",unit:"Yrs",ref:U,options:{type:"text",maxLength:2,defaultValue:45}}),Object(o.jsx)(d,{text:"Duration to analyze:",unit:"Yrs",ref:B,options:{type:"text",maxLength:2,defaultValue:25}}),Object(o.jsx)(d,{text:"Starting capital:",unit:w.currency,ref:z,options:{defaultValue:25e4}}),Object(o.jsx)("hr",{}),Object(o.jsx)(f,{ref:K}),Object(o.jsx)("hr",{}),Object(o.jsx)(d,{text:"Monthly gross salary:",unit:w.currency,ref:J,options:{defaultValue:32e3}}),Object(o.jsx)(d,{text:"Annual salary increase:",unit:"%",ref:q,options:{type:"percent",defaultValue:5}}),Object(o.jsx)(d,{text:"Monthly costs:",unit:w.currency,ref:H,options:{defaultValue:12e3}}),Object(o.jsx)(d,{text:"Annual costs increase:",unit:"%",ref:G,options:{type:"percent",defaultValue:2}}),Object(o.jsx)("hr",{}),Object(o.jsx)(d,{text:"Annual ROI excl. fees:",unit:"%",ref:Q,options:{type:"percent",defaultValue:10.5}}),Object(o.jsx)(d,{text:"Standard deviation:",unit:"%",ref:X,options:{type:"percent",defaultValue:16}}),Object(o.jsx)(d,{text:"Annual fees:",unit:"%",ref:Z,options:{type:"percent",defaultValue:3}}),Object(o.jsx)(d,{text:"Inflation:",unit:"%",ref:$,options:{type:"percent",defaultValue:2}}),Object(o.jsx)("hr",{}),Object(o.jsx)(v,{}),Object(o.jsx)("span",{className:"flex-center",children:Object(o.jsx)("button",{className:"analyse-button",onClick:function(){return ne(w.iterations)},children:"Run Analysis"})}),Object(o.jsx)("hr",{}),Object(o.jsx)("h3",{children:"Add custom events:"}),Object(o.jsx)(p,{addExtra:function(e){e&&I([e].concat(Object(l.a)(V)))},currency:w.currency}),Object(o.jsx)("div",{className:"extras",children:(V||[]).map((function(e){return Object(o.jsx)(h,{extra:e,currency:w.currency,removeExtra:te},e.id)}))})]}),Object(o.jsxs)("div",{className:"flex-cols",children:[Object(o.jsx)(x,{type:"bar",title:"Total Assets",data:s,yLabel:w.currency,legend:!0}),Object(o.jsx)(x,{type:"bar",title:"Annual Expenses",data:S,yLabel:w.currency,legend:!0}),Object(o.jsx)(x,{type:"bar",title:"Distribution",data:y,xLabel:w.iterations?"Sigma / ".concat(w.precision):"Sigma",yLabel:"No. Outcomes",legend:!1}),W.best&&Object(o.jsxs)("div",{className:"bottom-stats",children:[Object(o.jsx)("h3",{children:"Statistics summary:"}),Object(o.jsx)("span",{className:"flex-cols",children:Object.keys(W).map((function(e,t){return Object(o.jsx)(j,{text:e.capitalize()+":",stat:W[e.toLowerCase()]},t)}))})]})]})]}),Object(o.jsxs)("footer",{children:[Object(o.jsx)("hr",{}),"All Rights Reserved Emanuel Sl\xe4tteby 2021"]})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,169)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(m,{})}),document.getElementById("root")),g()},52:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){}},[[168,1,2]]]);
//# sourceMappingURL=main.a22d05cf.chunk.js.map